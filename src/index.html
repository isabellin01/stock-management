<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Sistema</title>
    <link rel="stylesheet" href="./styles/sidebar.css">
    <link rel="stylesheet" href="./styles/main.css">
</head>

<body>

    <aside class="sidebar">
        <h2 class="logo">Stocklee</h2>

        <nav>
            <ul class="menu">
                <li>
                    <a href="estoque.html">Estoque</a>
                </li>

                <li class="has-submenu">
                    <span>Produtos</span>
                    <ul class="submenu">
                        <li><a href="#">Adicionar</a></li>
                        <li><a href="#">Modificar</a></li>
                    </ul>
                </li>

                <li>
                    <a href="movimentacoes.html">Movimentações</a>
                </li>
            </ul>
        </nav>
    </aside>


    <section class="maincontent">
        <header class="header">
            <h1>Estoque de EPI's</h1>
        </header>

        <div class="month-dropdown">
            <button class="month-btn" id="monthBtn">
                <span id="currentMonth"></span><img src="./img/dropdown-arrow-svgrepo-com.svg">
            </button>
            <ul class="month-list" id="monthList"></ul>
        </div>
        <div class="container">

            <table class="stock-table">
                <thead>
                    <tr>
                        <th>EPI's</th>
                        <th>CA</th>
                        <th>Estoque In.</th>
                        <th>Estoque Fn.</th>
                        <th>Estoque</th>
                    </tr>
                </thead>
                <tbody id="stockBody">
                    <!-- Dados -->
                </tbody>
            </table>

        </div>
    </section>

</body>
<script>
    // =======================
    // MÊS ATUAL + DROPDOWN
    // =======================
    const months = [
        "JANEIRO", "FEVEREIRO", "MARÇO", "ABRIL", "MAIO", "JUNHO",
        "JULHO", "AGOSTO", "SETEMBRO", "OUTUBRO", "NOVEMBRO", "DEZEMBRO"
    ];

    const now = new Date();
    const currentMonthIndex = now.getMonth();
    const year = String(now.getFullYear()).slice(-2);

    const currentMonthEl = document.getElementById("currentMonth");
    const monthList = document.getElementById("monthList");
    const monthBtn = document.getElementById("monthBtn");

    currentMonthEl.textContent = `${months[currentMonthIndex]} ${year}`;

    // meses anteriores
    for (let i = currentMonthIndex - 1; i >= 0; i--) {
        const li = document.createElement("li");
        li.textContent = `${months[i]} ${year}`;
        li.onclick = () => {
            currentMonthEl.textContent = li.textContent;
            monthList.style.display = "none";
        };
        monthList.appendChild(li);
    }

    // toggle dropdown
    monthBtn.addEventListener("click", () => {
        monthList.style.display =
            monthList.style.display === "block" ? "none" : "block";
    });

    // =======================
    // TABELA DINÂMICA (mock)
    // =======================
    const stockData = [
        { epi: "Capacete", ca: "12345", inicio: 50, fim: 30 },
        { epi: "Luva", ca: "67890", inicio: 100, fim: 80 },
        { epi: "Óculos", ca: "11223", inicio: 40, fim: 25 }
    ];

    const stockBody = document.getElementById("stockBody");

    stockData.forEach(item => {
        const estoqueTotal = item.inicio - item.fim;

        const tr = document.createElement("tr");
        tr.innerHTML = `
        <td>${item.epi}</td>
        <td>${item.ca}</td>
        <td>${item.inicio}</td>
        <td>${item.fim}</td>
        <td>${estoqueTotal}</td>
    `;
        stockBody.appendChild(tr);
    });
</script>

</html>